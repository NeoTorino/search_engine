<div id="filters" class="filters-container">
  <form method="get" action="/search" class="filters-form" id="filters-form">
    
    <!-- Search Section -->
    <div class="search-section">
      <div class="search-bar">
        <div class="search-input-wrapper">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input
            id="navbar-search-input"
            class="search-input"
            type="search"
            placeholder="Search jobs..."
            aria-label="Search"
            name="q"
            value="{{ query|default('') }}"
          />
        </div>
        <button id="search-btn" class="search-button" type="submit">
          <span>Search</span>
        </button>
      </div>
    </div>

    <!-- Filters Section -->
    <div class="filters-section">
      <div class="filters-header">
        <h3 class="filters-title">
          <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
          </svg>
          Filters
        </h3>
        <div class="filters-buttons">
          <button id="update-filters" class="update-button" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
              <path d="M3 21v-5h5"></path>
              <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
              <path d="M21 3v5h-5"></path>
            </svg>
            Update
          </button>
          <button id="reset-filters" class="reset-button" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
              <path d="M21 3v5h-5"></path>
              <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
              <path d="M3 21v-5h5"></path>
            </svg>
            Reset
          </button>
        </div>
      </div>

      <div class="filters-grid">
        <!-- Date Filter -->
        <div class="filter-item">
          <label class="filter-label">Date Posted</label>
          <div class="date-filter-wrapper">
            <span id="date-slider-label" class="date-label">
              Showing jobs posted in the last {{ date_posted_days or 30 }} days
            </span>
            <div class="slider-wrapper">
              <input type="range" id="date-slider" name="date_posted_days" min="0" max="30" value="{{ date_posted_days or 30 }}" class="date-slider">
              <div class="slider-labels">
                <span>Today</span>
                <span>All time</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Country Filter -->
        <div class="filter-item">
          <label class="filter-label">Countries</label>
          <div id="country-multiselect" class="multiselect-container">
            <button class="multiselect-button" type="button">
              <span class="multiselect-text">All Countries</span>
              <div class="multiselect-arrow">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </div>
            </button>
          
            <div class="multiselect-dropdown">
              <div class="multiselect-search">
                <input type="text" placeholder="Search countries..." id="country-search">
              </div>
              <div id="country-options" class="multiselect-options"></div>
            </div>
          </div>
          
          <!-- Hidden inputs for selected countries -->
          <div id="country-hidden-inputs">
            {% for country in selected_countries %}
              <input type="hidden" name="country" value="{{ country }}">
            {% endfor %}
          </div>
        </div>
        
        <!-- Organization Filter -->
        <div class="filter-item">
          <label class="filter-label">Organizations</label>
          <div id="organization-multiselect" class="multiselect-container">
            <button class="multiselect-button" type="button">
              <span class="multiselect-text">All Organizations</span>
              <div class="multiselect-arrow">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </div>
            </button>
          
            <div class="multiselect-dropdown">
              <div class="multiselect-search">
                <input type="text" placeholder="Search organizations..." id="organization-search">
              </div>
              <div id="organization-options" class="multiselect-options"></div>
            </div>
          </div>
          
          <!-- Hidden inputs for selected organizations -->
          <div id="organization-hidden-inputs">
            {% for organization in selected_organizations %}
              <input type="hidden" name="organization" value="{{ organization }}">
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </form>
</div>