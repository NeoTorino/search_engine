<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Search Jobs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>

  <div id="sidebar">
    <h5>Filter by Country</h5>
    <form method="get" action="/">
      <div class="mb-2">
        <input type="hidden" name="q" value="{{ query }}">
        {% for country in ['United Kingdom', 'United States', 'Canada', 'Australia'] %}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="country" value="{{ country }}" id="{{ country|lower|replace(' ', '-') }}"
            {% if country in selected_countries %}checked{% endif %}>
          <label class="form-check-label" for="{{ country|lower|replace(' ', '-') }}">{{ country }}</label>
        </div>
        {% endfor %}
      </div>
      <button type="submit" class="btn btn-primary btn-sm">Apply Filter</button>
    </form>
  </div>

  <div id="topbar">
    <form method="get" action="/">
      <input
        type="text"
        name="q"
        placeholder="Search..."
        value="{{ query }}"
        autocomplete="off"
      />
      <button type="submit">Search</button>
    </form>

    {% if query %}
    <div id="total-results">
      About {{ "{:,}".format(total_results) }} result{{ total_results != 1 and 's' or '' }}
      for "<strong>{{ query }}</strong>"
    </div>
    {% endif %}
  </div>

  <div id="main-content">
    <div id="results-section">
      {% if not query %}
        <div id="slogan">
          <div>
            <h1>Find Your Next Big Opportunity</h1>
            <p>Browse thousands of curated job listings around the world. Start your journey today.</p>
          </div>
        </div>
      {% elif results %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="results-container">
          {% include '_results.html' %}
        </div>
        <div class="text-center mt-4">
          <button
            id="load-more"
            class="btn btn-outline-primary"
            data-query="{{ query }}"
            data-offset="{{ offset }}"
          >
            Load More
          </button>
        </div>
      {% else %}
        <p class="text-muted">No results found for "{{ query }}"</p>
      {% endif %}
    </div>
  </div>
  
  <script src="{{ url_for('static', filename='scripts.js') }}"></script>
</body>
</html>
